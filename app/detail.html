<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CITY • Detail</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

<header class="topbar">
  <div class="container topbar__inner">
    <a class="brand" href="./index.html" aria-label="CITY Home">
      <span class="brand__icon" aria-hidden="true">
        <svg width="26" height="26" viewBox="0 0 24 24" fill="none">
          <path d="M4 20V9a2 2 0 0 1 2-2h3v13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M9 20V5a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M2 20h20" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M13 7h2M13 10h2M13 13h2M17 7h2M17 10h2M17 13h2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </span>
      <span class="brand__text">CITY</span>
    </a>

    <nav class="nav">
     <a class="nav__link" href="./app.html" data-i18n="navTopIdeas">Top Ideas</a>
      <a class="nav__link" href="./polls.html" data-i18n="navPolls">Polls</a>
      <a class="nav__link" href="./leaderboard.html" data-i18n="navLeaderboard">Leaderboard</a>
      <a class="nav__link" href="./submit.html" data-i18n="navSubmit">Submit Ideas</a>
    </nav>

    <div class="topbar__right">
      <div class="seg" role="tablist" aria-label="Role">
        <button class="seg__btn" id="roleCitizenBtn" type="button" data-i18n="roleCitizen">Citizen</button>
        <button class="seg__btn" id="roleOfficialBtn" type="button" data-i18n="roleOfficial">Official</button>
      </div>

      <button id="xpPill" class="xpPill" type="button">LV 1 • 0 XP</button>
      <button class="btn btn--ghost" id="loginBtn" type="button">Login</button>

      <select id="langSelect" class="select select--lang" aria-label="Language">
        <option value="ko">KO</option>
        <option value="en">EN</option>
      </select>
    </div>
  </div>
</header>

<main class="container page">
  <a class="back" href="./index.html" data-i18n="backToList">← Back</a>

  <section class="detailCard">
    <div class="detailHead">
      <div>
        <h1 class="detailTitle" id="dTitle">—</h1>
        <div class="detailMeta" id="dMeta">—</div>
      </div>
      <span class="badge" id="dStatus">—</span>
    </div>

    <div class="divider"></div>

    <h3 class="h3" data-i18n="realWorldImpact">Real-World Impact</h3>
    <div class="impactBox">
      <div class="impactBox__title">↗ <span data-i18n="realWorldImpact">Real-World Impact</span></div>
      <p class="impactBox__text" id="dImpact">—</p>
    </div>

    <div class="divider"></div>

    <h3 class="h3" data-i18n="description">Description</h3>
    <p class="desc" id="dDesc">—</p>

    <div class="divider"></div>

    <div id="photoSection" hidden>
      <h3 class="h3" data-i18n="photo">Photos</h3>
      <div id="photoGallery" class="photoGallery"></div>
      <div class="divider"></div>
    </div>

    <div class="row">
      <div class="likeBox">
        <div class="likeBox__left">
          <div class="likeBox__label"><span data-i18n="likes">Likes</span> • <span id="likeCount">0</span></div>
          <div class="mutedSmall" id="likeHint"></div>
        </div>
        <button class="btn btn--primary" id="likeBtn" type="button" data-i18n="likeBtn">Like</button>
      </div>

      <div class="commentCount">
        <span data-i18n="comments">Comments</span> • <span id="commentCount">0</span>
      </div>
    </div>

    <div id="officialDivider" class="divider" hidden></div>

    <div id="officialTools" class="officialTools" hidden>
      <h3 class="h3" data-i18n="officialTools">Official Tools</h3>
      <div class="officialRow">
        <label class="label" data-i18n="changeStatus">Change status</label>
        <select id="statusSelect" class="select">
          <option value="new">New</option>
          <option value="under_review">Under Review</option>
          <option value="in_progress">In Progress</option>
          <option value="implemented">Implemented</option>
        </select>
        <button class="btn btn--primary" id="saveStatusBtn" type="button" data-i18n="save">Save</button>
      </div>
      <div class="mutedSmall" data-i18n="officialHint">Only visible in Official mode. Status is stored in localStorage.</div>
    </div>

    <!-- ✅ Admin tools (admin 계정 전용) -->
    <div id="adminDivider" class="divider" hidden></div>
    <div id="adminTools" class="officialTools" hidden>
      <h3 class="h3" data-i18n="adminTools">Admin Tools</h3>
      <div class="officialRow">
        <button class="btn btn--ghost" id="deleteIdeaBtn" type="button" data-i18n="deleteIdea">Delete Idea</button>
      </div>
      <div class="mutedSmall" data-i18n="adminHint">Admin can delete user-submitted ideas and manage all comments.</div>
    </div>

    <div class="divider"></div>

    <h3 class="h3" data-i18n="comments">Comments</h3>
    <div class="mutedSmall" id="commentHint"></div>

    <div id="replyBarRow" class="replyBarRow">
      <div id="replyBanner" class="replyBanner" hidden></div>
      <button class="btn btn--ghost" id="cancelReplyBtn" type="button" data-i18n="cancelReply" hidden>Cancel reply</button>
    </div>

    <form id="commentForm" class="commentForm">
      <textarea id="commentInput" class="textarea" rows="4" placeholder="Write a comment..."></textarea>
      <div class="commentForm__actions">
        <button class="btn btn--primary" type="submit" data-i18n="postComment">Post Comment</button>
      </div>
    </form>

    <div id="commentList" class="commentList"></div>
  </section>
</main>

<script src="./script.js"></script>
</body>
</html>
